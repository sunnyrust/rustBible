# 3.3 ç®€å•æ•°æ®ç±»å‹(Data Types)

[TOC]

è¿™ç« æˆ‘ä»¬è®²ä¸€ä¸‹Rustçš„æ•°æ®ç±»å‹ã€‚

## æ•´æ•°å‹(Integer)
æ•´æ•°æ˜¯ä¸€ä¸ªæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚å…·ä½“åˆ°Rustæœ‰å¾ˆå¤šç§æ•´æ•°ç±»å‹,æŒ‰ç…§bité•¿åº¦å’Œæ˜¯å¦æœ‰ç¬¦å·å¯ä»¥åˆ†ä¸ºä¸€ä¸‹å‡ ç±»ï¼š


|Length|Signed|Unsigned|
|:--|:--|:--|
|8-bit|i8|u8|
|16-bit|i16|u16|
 |32-bit|i32|u32|
 |64-bit|i64|u64|
 |128-bit|i128|u128|
 |arch|isize|usize|

isize å’Œ usize ä¸¤ç§æ•´æ•°ç±»å‹æ˜¯ç”¨æ¥è¡¡é‡æ•°æ®å¤§å°çš„ï¼Œå®ƒä»¬çš„ä½é•¿åº¦å–å†³äºæ‰€è¿è¡Œçš„ç›®æ ‡å¹³å°ï¼Œå¦‚æœæ˜¯ 32 ä½æ¶æ„çš„å¤„ç†å™¨å°†ä½¿ç”¨ 32 ä½ä½é•¿åº¦æ•´å‹ã€‚

æ•´æ•°çš„è¡¨è¿°æ–¹æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š
|è¿›åˆ¶|æ ·ä¾‹|
|--|--|
|åè¿›åˆ¶|	98_222|
|åå…­è¿›åˆ¶|	0xff|
|å…«è¿›åˆ¶|	0o77|
|äºŒè¿›åˆ¶|	0b1111_0000|
|å­—èŠ‚(åªèƒ½è¡¨ç¤º u8 å‹)|	b'A'|

æœ‰çš„æ•´æ•°ä¸­é—´å­˜åœ¨ä¸€ä¸ªä¸‹åˆ’çº¿ï¼Œè¿™ç§è®¾è®¡å¯ä»¥è®©äººä»¬åœ¨è¾“å…¥ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—æ—¶æ›´å®¹æ˜“åˆ¤æ–­æ•°å­—çš„å€¼å¤§æ¦‚æ˜¯å¤šå°‘ã€‚å°±å¦‚åŒ58,123ä¸­é—´çš„ï¼Œã€‚

### ä¾‹å­
ä»Šå¤©æ­£å¥½æ˜¯Delphi26å²çš„ç”Ÿæ—¥ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šçš„[çºªå¿µæ–‡ç« ](https://blogs.embarcadero.com/26-years-of-delphi/)ã€‚æˆ‘åœ¨è¿™é‡Œä¹Ÿçºªå¿µä¸€ä¸‹å®ƒï¼Œä½¿ç”¨æˆ‘çš„æ–¹å¼ã€‚

å…ˆçœ‹çœ‹Delphiå½“å¹´çš„æ ·ä¾‹ï¼š
![delphi01](./chapter03_delphi01.png)

ç°åœ¨çš„æ ·å­
![delphi02](./chapter03_delphi02.png)

æˆ‘ä¹Ÿå†™ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„ä¾‹å­æ¥çºªå¿µã€‚è™½ç„¶æŠŠåé¢çš„å¾ªç¯æå‰å±•ç¤ºäº†ä¸€ç‚¹ï¼Œä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œè¿™é‡Œåªæ˜¯ç®€å•æåŠï¼Œåé¢ä¼šè¯¦ç»†è®²ã€‚

```shell
$ cargo new delphi26
     Created binary (application) `delphi26` package
$ cd delphi26
```

```rust
fn main() {
    for i in 1..27 {
        println!("Happy Birthday {}",i);
    }
}
```
è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªç®€å•çš„å¾ªç¯ï¼Œçœ‹çœ‹æ•´æ•°çš„å¾ªç¯ã€‚

ä¸‹é¢çš„ä¾‹å­ï¼Œè®©æˆ‘çœŸåˆ‡æ„Ÿå—ä¸€ä¸‹Integerï¼š

```shell
$ cargo new sunny_integer
     Created binary (application) `sunny_integer` package
```

```rust
fn main() {
    println!("The smallest i8 is {} and the biggest i8 is {}.", std::i8::MIN, std::i8::MAX); // hint: printing std::i8::MIN means "print MIN inside of the i8 section in the standard library"
    println!("The smallest u8 is {} and the biggest u8 is {}.", std::u8::MIN, std::u8::MAX);
    println!("The smallest i16 is {} and the biggest i16 is {}.", std::i16::MIN, std::i16::MAX);
    println!("The smallest u16 is {} and the biggest u16 is {}.", std::u16::MIN, std::u16::MAX);
    println!("The smallest i32 is {} and the biggest i32 is {}.", std::i32::MIN, std::i32::MAX);
    println!("The smallest u32 is {} and the biggest u32 is {}.", std::u32::MIN, std::u32::MAX);
    println!("The smallest i64 is {} and the biggest i64 is {}.", std::i64::MIN, std::i64::MAX);
    println!("The smallest u64 is {} and the biggest u64 is {}.", std::u64::MIN, std::u64::MAX);
    println!("The smallest i128 is {} and the biggest i128 is {}.", std::i128::MIN, std::i128::MAX);
    println!("The smallest u128 is {} and the biggest u128 is {}.", std::u128::MIN, std::u128::MAX);
}
```

è¿è¡Œç»“æœï¼š

```shell
$ cargo run -q
The smallest i8 is -128 and the biggest i8 is 127.
The smallest u8 is 0 and the biggest u8 is 255.
The smallest i16 is -32768 and the biggest i16 is 32767.
The smallest u16 is 0 and the biggest u16 is 65535.
The smallest i32 is -2147483648 and the biggest i32 is 2147483647.
The smallest u32 is 0 and the biggest u32 is 4294967295.
The smallest i64 is -9223372036854775808 and the biggest i64 is 9223372036854775807.
The smallest u64 is 0 and the biggest u64 is 18446744073709551615.
The smallest i128 is -170141183460469231731687303715884105728 and the biggest i128 is 170141183460469231731687303715884105727.
The smallest u128 is 0 and the biggest u128 is 340282366920938463463374607431768211455.
```

## æµ®ç‚¹å‹(Float)
Rustè¿˜æœ‰ä¸¤ç§æµ®ç‚¹å‹æ•°æ®ç±»å‹ï¼ŒRustçš„æµ®ç‚¹æ•°ç±»å‹æ˜¯f32å’Œf64ï¼Œåˆ†åˆ«ä¸º32ä½å’Œ64ä½ï¼Œé»˜è®¤çš„ç±»å‹æ˜¯f64ã€‚

```rust
fn main() {
    let f32:f32=0.32;   // float32 è¦åšç±»å‹æŒ‡å®š
    let f64 =0.64; // é»˜è®¤æ˜¯float64

    println!("f32={}  f64={:#?}",f32,f64);

    println!("The smallest f32 is {} and the biggest f32 is {}.", std::f32::MIN, std::f32::MAX); 
    println!("The smallest f64 is {} and the biggest f64 is {}.", std::f64::MIN, std::f64::MAX);
}
```

è¿è¡Œç»“æœ
```shell
f32=0.32  f64=0.64
The smallest f32 is -340282350000000000000000000000000000000 and the biggest f32 is 340282350000000000000000000000000000000.
The smallest f64 is -179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 and the biggest f64 is 179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000.
```
## å¸ƒå°”ç±»å‹(Boolean)
å’Œå¤§å¤šæ•°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒRustä¸­çš„å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå€¼ï¼štrueå’Œfalseã€‚å¸ƒå°”ç±»å‹çš„å¤§å°æ˜¯ä¸€ä¸ªå­—èŠ‚ã€‚

```rust
fn main() {
    let b_true =true;              //æ²¡æœ‰å¸¦ä¸Šç±»å‹æŒ‡ç¤ºï¼ŒRustä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™åšåˆ¤æ–­
    let b_false:bool =false; // å¸¦æœ‰æ˜ç¡®çš„ç±»å‹æ³¨é‡Š
    println!("çœŸ={}  å‡={:#?}",b_true,b_false);

    if b_true{
        println!("çœŸ");
    }

    if !b_false{
        println!("å‡");
    }
}
```

## å­—ç¬¦ç±»å‹(Character)
Rustçš„charç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸå§‹çš„å­—æ¯ç±»å‹ï¼Œä¸‹é¢çš„ä»£ç å±•ç¤ºäº†ä½¿ç”¨å®ƒçš„ä¸€ç§æ–¹æ³•ã€‚(è¯·æ³¨æ„ï¼Œchar å­—ç¬¦æ˜¯ç”¨å•å¼•å·æŒ‡å®šçš„ï¼Œä¸å­—ç¬¦ä¸²å­—ç¬¦ä¸åŒï¼Œåè€…ä½¿ç”¨åŒå¼•å·ã€‚)

```rust
fn main() {
    let i_num =100;
    println!("{}è½¬æ¢æˆchar---{}",i_num,i_num as u8 as char);
    println!("{}----{}", "B","B".len()); // .len() gives the size in bytes
    println!("{}----{}", "ÃŸ","ÃŸ".len());
    println!("{}---{}", "é”ˆ","é”ˆ".len());
    println!("{}---{}", "ğŸ˜º","ğŸ˜º".len());
    println!("{}----{}", "âš ï¸","âš ï¸".len());
    let ico = "ğŸ˜‚";
    println!("The ico is actually {}----{}", ico,ico.len());
}
```

Rustçš„ char ç±»å‹å¤§å°ä¸º 4 ä¸ªå­—èŠ‚ï¼Œä»£è¡¨ Unicodeæ ‡é‡å€¼ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥æ”¯æŒä¸­æ–‡ï¼Œæ—¥æ–‡å’ŒéŸ©æ–‡å­—ç¬¦ç­‰éè‹±æ–‡å­—ç¬¦ç”šè‡³è¡¨æƒ…ç¬¦å·å’Œé›¶å®½åº¦ç©ºæ ¼åœ¨ Rust ä¸­éƒ½æ˜¯æœ‰æ•ˆçš„ char å€¼ã€‚

Unicode å€¼çš„èŒƒå›´ä» U+0000 åˆ° U+D7FF å’Œ U+E000 åˆ° U+10FFFF ï¼ˆåŒ…æ‹¬ä¸¤ç«¯ï¼‰ã€‚ ä½†æ˜¯ï¼Œ"å­—ç¬¦"è¿™ä¸ªæ¦‚å¿µå¹¶ä¸å­˜åœ¨äº Unicode ä¸­ï¼Œå› æ­¤æ‚¨å¯¹"å­—ç¬¦"æ˜¯ä»€ä¹ˆçš„ç›´è§‰å¯èƒ½ä¸Rustä¸­çš„å­—ç¬¦æ¦‚å¿µä¸åŒ¹é…ã€‚æ‰€ä»¥ä¸€èˆ¬æ¨èä½¿ç”¨å­—ç¬¦ä¸²å‚¨å­˜ UTF-8 æ–‡å­—ï¼ˆéè‹±æ–‡å­—ç¬¦å°½å¯èƒ½åœ°å‡ºç°åœ¨å­—ç¬¦ä¸²ä¸­ï¼‰ã€‚

è¿è¡Œç»“æœ

```shell
100è½¬æ¢æˆchar---d
B----1
ÃŸ----2
é”ˆ---3
ğŸ˜º---4
âš ï¸----6
The ico is actually ğŸ˜‚----4
```

2021-02-25