# å¤„ç†é™æ€èµ„æº

[TOC]

ç°åœ¨ç½‘é¡µå¼€å‘å·²ç»è¶Šæ¥è¶Šè¶‹å‘äºå‰ååˆ†ç¦»çš„å¼€å‘æ¨¡å¼ï¼Œä½†æ˜¯ä»¥å‰å¼€å‘ç½‘é¡µå¤šé‡‡ç”¨å‰åç«¯ä¸å®Œå…¨åˆ†ç¦»çš„æ–¹å¼ï¼Œ`MVC`æ–¹å¼å¸¸å¸¸ä¼šæŒ‡å®šä¸€ä¸ªé™æ€è·¯å¾„ï¼Œç”¨äºå­˜å‚¨`js`ã€`css`ã€`images`ç­‰ã€‚

`Axum`ä¹Ÿæ˜¯æ”¯æŒè¿™ç§æ–¹å¼ï¼Œè€Œä¸”å¾ˆæ–¹ä¾¿ã€‚æœ¬èŠ‚æˆ‘ä»¬å°±æ¥ä¸€èµ·è®¾å®šä¸€ä¸‹é™æ€è·¯å¾„ã€‚

é™æ€èµ„æºä¸€èˆ¬ä¸éœ€è¦æœåŠ¡ç«¯åšé¢å¤–çš„ä¸šåŠ¡å¤„ç†ï¼Œç›´æ¥é€ä¼ ç»™æµè§ˆå™¨å°±è¡Œï¼Œ`axum`å¯ä»¥æŒ‡å®šå°†æŸä¸ªç›®å½•æŒ‡å®šä¸ºé™æ€èµ„æºã€‚

# å…·ä½“æ“ä½œ

```shell
$ mkdir -p static/css
$ mkdir -p static/js
$ mkdir -p static/images
```

ä¿®æ”¹ä¸€ä¸‹`lib.rs`

```rust
use axum::{
    http::StatusCode,
    response::IntoResponse,
};
use std::{io};
pub async  fn web_handle_error(_err: io::Error) -> impl IntoResponse {
    (StatusCode::INTERNAL_SERVER_ERROR, "Something went wrong...")
}
```



ä¿®æ”¹ä¸€ä¸‹`router.rs`

> æ“ä½œè¿™ä¸ªä¸€å®šè¦æ³¨æ„ä¸€å®šä¸Šé¢å†™å®Œ`let serve_dir = get_service(ServeDir::new("./static")).handle_error(web_handle_error);`
>
> èµ¶ç´§åœ¨ä¸‹é¢æ·»åŠ ä¸€è¡Œï¼š
>
> `.nest_service("/", serve_dir.clone())`
>
> ä¸ç„¶å°±ä¼šæç¤ºæœ‰é”™è¯¯
>
> ![](./7.6.1.jpg)

```rust
use axum::routing::{get,get_service,};
use crate::controller;
use tower_http::{services::{ServeDir},};
use super::web_handle_error;
pub fn init() -> axum::Router {
    let serve_dir = get_service(ServeDir::new("./static")).handle_error(web_handle_error);
    let css_dir = get_service(ServeDir::new("./static/css")).handle_error(web_handle_error);
    let js_dir = get_service(ServeDir::new("./static/js")).handle_error(web_handle_error);
    let images_dir = get_service(ServeDir::new("./static/images")).handle_error(web_handle_error);
    axum::Router::new()
        .nest_service("/", serve_dir.clone())
        .nest_service("/css", css_dir.clone())
        .nest_service("/js", js_dir.clone())
        .nest_service("/images", images_dir.clone())
        .route("/do", get(crate::get_fun).post(crate::post_fun))
        .route("/greet", get(|| async { "Hello, axum World!ğŸŒ±ğŸŒ" }))
        .nest("/index", controller::index::index_router())
}
```

ç°åœ¨åˆ›å»ºå‡ ä¸ªæ–‡ä»¶

`static/css/main.css`

```css
.hello
{
    text-align:center;
    color:red;
    font-size: 50px;
}
```



`static/index.html`

```html
<!DOCTYPE html>
<html>
    <head>
        <title>HelloWorld Axum</title>
    </head>
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <body>
        <pdiv class="hello">HelloWorld Axum</div>
    </body>
</html>
```

è¯·æ±‚ä¸€ä¸‹

![](./7.6.2.jpg)

![](./7.6.3.jpg)

è¿™ä¸ªå°±æœ‰ç‚¹éš¾åº¦äº†ï¼Œä¸»è¦ä¸Šé¢é‡åˆ°çš„é”™è¯¯ï¼Œå¾ˆä¸å®¹æ˜“æ‰¾åˆ°åŸå› ã€‚è¿™ä¸ªå¯èƒ½ç­‰`Axum`å†æˆç†Ÿä¸€äº›ï¼Œå°±ä¸ä¼šæœ‰ç±»ä¼¼çš„é—®é¢˜äº†ã€‚

åœ¨å¢åŠ ä¸€ä¸ªå›¾ç‰‡

